{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from \"flatpickr\";\n// import \"flatpickr/dist/flatpickr.min.css\";\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst btnStart = document.querySelector(\"[data-start]\");\nconst inputDatetimePicker = document.querySelector(\"#datetime-picker\");\nconst days = document.querySelector(\"[data-days]\");\nconst hours = document.querySelector(\"[data-hours]\");\nconst minutes = document.querySelector(\"[data-minutes]\");\nconst seconds = document.querySelector(\"[data-seconds]\");\n\nlet userSelectedDate;\n\nconst options = {\n    enableTime: true,\n    time_24hr: true,\n    defaultDate: new Date(),\n    minuteIncrement: 1,\n    onClose(selectedDates) {\n      console.log(selectedDates[0]);\n      userSelectedDate = selectedDates[0];\n\n      if (userSelectedDate <= new Date()) {\n        iziToast.error({\n            title: 'Error',\n            message: 'Please choose a date in the future',\n            position: 'topCenter',\n            backgroundColor: '#EF4040',\n            class: 'show-error',\n        });\n        btnStart.disabled = true;\n      } else {\n        btnStart.disabled = false;\n      }\n    },\n  };\n\nflatpickr(inputDatetimePicker, options); \n\nbtnStart.disabled = true;\n\nbtnStart.addEventListener(\"click\", () => {\n    if(userSelectedDate && userSelectedDate > new Date()) {\n        startCountDown(userSelectedDate);\n        inputDatetimePicker.disabled = true;\n        btnStart.disabled = true;\n    } else {\n        iziToast.show({\n            message: 'Please choose a valide date in the future',\n            position: 'topCenter',\n            backgroundColor: '#EF4040',\n            class: 'show-error',\n        });\n    }\n});\n\nfunction startCountDown(endDate) {\n    const countdownInterval = setInterval(() => {\n        const now = new Date().getTime();\n        const ms = endDate - now;\n\n        if (ms <= 0) {\n            clearInterval(countdownInterval);\n            alert(\"Countdown finished!\");\n            btnStart.disabled = false;\n            inputDatetimePicker.disabled = false; \n            return;\n        }\n        let convertedMs = convertMs(ms);\n        console.log(convertedMs);\n\n        days.innerHTML = addLeadingZero(convertedMs.days);\n        hours.innerHTML = addLeadingZero(convertedMs.hours);\n        minutes.innerHTML = addLeadingZero(convertedMs.minutes);\n        seconds.innerHTML = addLeadingZero(convertedMs.seconds);\n    }, 1000);\n \n}\n\nfunction addLeadingZero(value) {\n    return String(value).padStart(2, \"0\");\n}\n\nfunction convertMs(ms) {\n    // Number of milliseconds per unit of time\n    const second = 1000;\n    const minute = second * 60;\n    const hour = minute * 60;\n    const day = hour * 24;\n  \n    // Remaining days\n    const days = Math.floor(ms / day);\n    // Remaining hours\n    const hours = Math.floor((ms % day) / hour);\n    // Remaining minutes\n    const minutes = Math.floor(((ms % day) % hour) / minute);\n    // Remaining seconds\n    const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n  \n    return { days, hours, minutes, seconds };\n  };"],"names":["btnStart","inputDatetimePicker","days","hours","minutes","seconds","userSelectedDate","options","selectedDates","iziToast","flatpickr","startCountDown","endDate","countdownInterval","now","ms","convertedMs","convertMs","addLeadingZero","value"],"mappings":"qIAMA,MAAMA,EAAW,SAAS,cAAc,cAAc,EAChDC,EAAsB,SAAS,cAAc,kBAAkB,EAC/DC,EAAO,SAAS,cAAc,aAAa,EAC3CC,EAAQ,SAAS,cAAc,cAAc,EAC7CC,EAAU,SAAS,cAAc,gBAAgB,EACjDC,EAAU,SAAS,cAAc,gBAAgB,EAEvD,IAAIC,EAEJ,MAAMC,EAAU,CACZ,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACrB,QAAQ,IAAIA,EAAc,CAAC,CAAC,EAC5BF,EAAmBE,EAAc,CAAC,EAE9BF,GAAoB,IAAI,MAC1BG,EAAS,MAAM,CACX,MAAO,QACP,QAAS,qCACT,SAAU,YACV,gBAAiB,UACjB,MAAO,YACnB,CAAS,EACDT,EAAS,SAAW,IAEpBA,EAAS,SAAW,EAEvB,CACL,EAEAU,EAAUT,EAAqBM,CAAO,EAEtCP,EAAS,SAAW,GAEpBA,EAAS,iBAAiB,QAAS,IAAM,CAClCM,GAAoBA,EAAmB,IAAI,MAC1CK,EAAeL,CAAgB,EAC/BL,EAAoB,SAAW,GAC/BD,EAAS,SAAW,IAEpBS,EAAS,KAAK,CACV,QAAS,4CACT,SAAU,YACV,gBAAiB,UACjB,MAAO,YACnB,CAAS,CAET,CAAC,EAED,SAASE,EAAeC,EAAS,CAC7B,MAAMC,EAAoB,YAAY,IAAM,CACxC,MAAMC,EAAM,IAAI,KAAM,EAAC,QAAO,EACxBC,EAAKH,EAAUE,EAErB,GAAIC,GAAM,EAAG,CACT,cAAcF,CAAiB,EAC/B,MAAM,qBAAqB,EAC3Bb,EAAS,SAAW,GACpBC,EAAoB,SAAW,GAC/B,MACH,CACD,IAAIe,EAAcC,EAAUF,CAAE,EAC9B,QAAQ,IAAIC,CAAW,EAEvBd,EAAK,UAAYgB,EAAeF,EAAY,IAAI,EAChDb,EAAM,UAAYe,EAAeF,EAAY,KAAK,EAClDZ,EAAQ,UAAYc,EAAeF,EAAY,OAAO,EACtDX,EAAQ,UAAYa,EAAeF,EAAY,OAAO,CACzD,EAAE,GAAI,CAEX,CAEA,SAASE,EAAeC,EAAO,CAC3B,OAAO,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,CACxC,CAEA,SAASF,EAAUF,EAAI,CAQnB,MAAMb,EAAO,KAAK,MAAMa,EAAK,KAAG,EAE1BZ,EAAQ,KAAK,MAAOY,EAAK,MAAO,IAAI,EAEpCX,EAAU,KAAK,MAAQW,EAAK,MAAO,KAAQ,GAAM,EAEjDV,EAAU,KAAK,MAASU,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAb,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CAC1C"}